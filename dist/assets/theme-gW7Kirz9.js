function A(){const r=document.getElementById("mobile-menu-btn"),n=document.getElementById("mobile-menu"),c=document.getElementById("mobile-menu-overlay"),s=document.getElementById("search-toggle-btn"),d=document.getElementById("search-bar"),m=document.getElementById("header-inner");let p=!1,v=!1;function L(){if(p=!p,p){n.classList.remove("opacity-0","scale-95","pointer-events-none"),n.classList.add("opacity-100","scale-100"),n.setAttribute("aria-hidden","false"),c.classList.remove("hidden"),r.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden";const e=r.querySelectorAll(".menu-line");e[0].classList.remove("-translate-y-2"),e[0].classList.add("rotate-45","translate-y-0"),e[1].classList.add("opacity-0"),e[2].classList.remove("translate-y-2"),e[2].classList.add("-rotate-45","translate-y-0")}else y()}function y(){if(p=!1,!n)return;n.classList.add("opacity-0","scale-95","pointer-events-none"),n.classList.remove("opacity-100","scale-100"),n.setAttribute("aria-hidden","true"),c==null||c.classList.add("hidden"),r==null||r.setAttribute("aria-expanded","false"),document.body.style.overflow="";const e=r==null?void 0:r.querySelectorAll(".menu-line");e&&(e[0].classList.add("-translate-y-2"),e[0].classList.remove("rotate-45","translate-y-0"),e[1].classList.remove("opacity-0"),e[2].classList.add("translate-y-2"),e[2].classList.remove("-rotate-45","translate-y-0"))}function g(){if(v=!v,v){d.classList.remove("opacity-0","-translate-y-2","pointer-events-none"),d.classList.add("opacity-100","translate-y-0"),d.setAttribute("aria-hidden","false"),s.setAttribute("aria-expanded","true");const e=d.querySelector('input[type="search"], input[type="text"]');e&&e.focus()}else h()}function h(){v=!1,d&&(d.classList.add("opacity-0","-translate-y-2","pointer-events-none"),d.classList.remove("opacity-100","translate-y-0"),d.setAttribute("aria-hidden","true"),s==null||s.setAttribute("aria-expanded","false"))}function E(){if(!m)return;window.scrollY>20?(m.classList.remove("lg:py-6"),m.classList.add("lg:py-3")):(m.classList.remove("lg:py-3"),m.classList.add("lg:py-6"))}function a(){const e=document.querySelectorAll(".submenu-toggle"),o=document.querySelectorAll(".submenu-btn");e.forEach(i=>{i.addEventListener("click",u=>{const f=window.innerWidth<1024,b=i.closest(".has-submenu"),w=b==null?void 0:b.querySelector(".submenu");if(f&&w)u.preventDefault(),l(b,w);else{const x=i.dataset.href||i.href;x&&x!=="javascript:void(0)"&&(window.location.href=x)}})}),o.forEach(i=>{i.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation();const f=i.closest(".has-submenu"),b=f==null?void 0:f.querySelector(".submenu");b&&l(f,b)})}),document.addEventListener("click",i=>{i.target.closest(".has-submenu")||t()})}function l(e,o){const i=!o.classList.contains("hidden");if(t(),!i){o.classList.remove("hidden");const u=e.querySelector(".submenu-btn"),f=e.querySelector(".submenu-icon");u==null||u.setAttribute("aria-expanded","true"),f==null||f.classList.add("rotate-180")}}function t(){document.querySelectorAll(".submenu").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll(".submenu-btn").forEach(e=>{e.setAttribute("aria-expanded","false")}),document.querySelectorAll(".submenu-icon").forEach(e=>{e.classList.remove("rotate-180")})}r&&r.addEventListener("click",L),c&&c.addEventListener("click",y),s&&s.addEventListener("click",g),document.addEventListener("click",e=>{v&&d&&!d.contains(e.target)&&!s.contains(e.target)&&h()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(p&&y(),v&&h(),t())}),window.addEventListener("scroll",E,{passive:!0}),E(),a()}function q(){const r=document.getElementById("slider");if(!r)return;const n=r.querySelectorAll(".slide"),c=document.getElementById("slider-prev"),s=document.getElementById("slider-next"),d=parseInt(r.dataset.total,10);let m=0,p=null,v=!1;function L(l){n.forEach((t,e)=>{e===l?(t.classList.remove("opacity-0","translate-x-full","-translate-x-full","pointer-events-none"),t.classList.add("opacity-100","translate-x-0"),t.removeAttribute("aria-hidden")):e<l?(t.classList.remove("opacity-100","translate-x-0","translate-x-full"),t.classList.add("opacity-0","-translate-x-full","pointer-events-none"),t.setAttribute("aria-hidden","true")):(t.classList.remove("opacity-100","translate-x-0","-translate-x-full"),t.classList.add("opacity-0","translate-x-full","pointer-events-none"),t.setAttribute("aria-hidden","true"))})}function y(){m=(m+1)%d,L(m)}function g(){m=(m-1+d)%d,L(m)}function h(){v&&!p&&(p=setInterval(y,4e3))}function E(){p&&(clearInterval(p),p=null)}c&&c.addEventListener("click",g),s&&s.addEventListener("click",y),r.addEventListener("mouseenter",E),r.addEventListener("mouseleave",h),new IntersectionObserver(l=>{l.forEach(t=>{v=t.isIntersecting,v?h():E()})},{threshold:.2}).observe(r)}function I(){const r=document.querySelector(".content-full");if(!r)return;const n=document.createElement("div");n.id="reading-progress",n.className="fixed top-0 left-0 h-1.5 bg-rojo transform-gpu z-50",n.style.width="0%",document.body.prepend(n);let c=!1;function s(){const d=r.getBoundingClientRect(),m=d.top+window.pageYOffset,p=d.height,v=window.innerHeight,L=window.pageYOffset;let y=0;if(L>m){const g=L-m,h=p-v;y=g/h*100,y=Math.min(Math.max(y,0),100)}n.style.width=`${y}%`}window.addEventListener("scroll",()=>{c||(requestAnimationFrame(()=>{s(),c=!1}),c=!0)},{passive:!0}),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),s()}function T(){const r=document.querySelector(".content-full");if(!r)return;let n=null,c=null;function s(){return window.innerWidth<=1e3}function d(a){var t,e;const l=a.parentNode.cloneNode(!0);return(t=l.querySelector('a[id^="sdfootnote"], a[id^="_ftn"]'))==null||t.remove(),l.querySelectorAll('a[href^="#sdfootnote"], a[href^="#_ftnref"]').forEach(o=>o.remove()),(e=l.querySelector("sup"))==null||e.remove(),l.innerHTML.trim().replace(/^\s*\[\d+\]\s*/,"").replace(/^\s*\d+\s*/,"")}function m(){return n||(n=document.createElement("div"),n.id="footnote-tooltip",n.className="footnote-tooltip bg-white border border-gray-200 p-4 rounded-lg shadow-lg fixed text-lg leading-relaxed z-50 max-w-md opacity-0 transition-opacity duration-200 pointer-events-none",document.body.appendChild(n),n.addEventListener("mouseover",()=>clearTimeout(c)),n.addEventListener("mouseleave",()=>v()),n)}function p(a,l){clearTimeout(c);const t=m();t.innerHTML=l,t.classList.remove("opacity-0","pointer-events-none"),t.classList.add("opacity-100","pointer-events-auto");const e=a.getBoundingClientRect(),o=window.innerWidth,i=window.innerHeight;t.style.left="0px";let u=Math.max(10,Math.min(e.left,o-t.offsetWidth-20)),f=e.bottom+5;e.bottom+t.offsetHeight>i&&e.top>t.offsetHeight&&(f=e.top-t.offsetHeight-5),t.style.left=`${u}px`,t.style.top=`${f}px`}function v(){c=setTimeout(()=>{n&&(n.classList.add("opacity-0","pointer-events-none"),n.classList.remove("opacity-100","pointer-events-auto"))},200)}function L(a,l,t){const e=document.getElementById(`expanded-footnote-${t}`);if(document.querySelectorAll(".expanded-footnote").forEach(i=>{i.id!==`expanded-footnote-${t}`&&(i.classList.add("removing"),i.classList.remove("entering"),setTimeout(()=>i.remove(),200))}),e){e.classList.add("removing"),e.classList.remove("entering"),setTimeout(()=>e.remove(),200);return}const o=document.createElement("div");o.id=`expanded-footnote-${t}`,o.className="expanded-footnote",o.innerHTML=l,y(a,o),requestAnimationFrame(()=>{o.classList.add("entering"),o.style.maxHeight=o.scrollHeight+"px"}),o.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),o.classList.add("removing"),o.classList.remove("entering"),setTimeout(()=>o.remove(),200)})}function y(a,l){const t=a.closest("sup")||a.querySelector("sup"),e=(t||a).nextSibling;if((e==null?void 0:e.nodeType)===Node.TEXT_NODE&&(e.textContent.startsWith(".")||e.textContent.startsWith(",")||e.textContent.startsWith(" "))){const[o,...i]=e.textContent,u=document.createTextNode(o),f=document.createTextNode(i.join(""));e.parentNode.replaceChild(u,e),u.parentNode.insertBefore(l,u.nextSibling),l.parentNode.insertBefore(f,l.nextSibling)}else(t||a).insertAdjacentElement("afterend",l)}const g=r.querySelector(".wp-block-separator"),h=a=>(g==null?void 0:g.compareDocumentPosition(a))&Node.DOCUMENT_POSITION_FOLLOWING;r.querySelectorAll('a[href*="_ftn"], a[href*="sdfootnote"]').forEach((a,l)=>{const t=a.getAttribute("href"),e=t.substring(1).replace(/^sdfootnoteanc/,"sdfootnotesym"),o=document.getElementById(e);if(!o)return;if(h(a)){a.addEventListener("click",u=>{u.preventDefault();const f=document.getElementById(t.replace("_ftn","_ftnref").substring(1));f==null||f.scrollIntoView({behavior:"smooth"})});return}const i=d(o);s()?a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),L(a,i,l)}):(a.addEventListener("mouseover",()=>p(a,i)),a.addEventListener("mouseout",()=>v()),a.addEventListener("click",u=>{u.preventDefault(),o.scrollIntoView({behavior:"smooth"})}))})}function S(){A(),q(),I(),T(),B()}function B(){document.querySelectorAll(".share-container").forEach(n=>{const c=n.querySelector(".share-toggle"),s=n.querySelector(".share-menu");!c||!s||(c.addEventListener("click",()=>{!s.classList.contains("opacity-0")?(s.classList.add("opacity-0","pointer-events-none"),s.classList.remove("opacity-100","pointer-events-auto"),c.setAttribute("aria-expanded","false")):(s.classList.remove("opacity-0","pointer-events-none"),s.classList.add("opacity-100","pointer-events-auto"),c.setAttribute("aria-expanded","true"))}),document.addEventListener("click",d=>{n.contains(d.target)||(s.classList.add("opacity-0","pointer-events-none"),s.classList.remove("opacity-100","pointer-events-auto"),c.setAttribute("aria-expanded","false"))}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S):S();
