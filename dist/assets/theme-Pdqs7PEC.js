function A(){const i=document.getElementById("mobile-menu-btn"),n=document.getElementById("mobile-menu"),l=document.getElementById("mobile-menu-overlay"),a=document.getElementById("search-toggle-btn"),c=document.getElementById("search-bar"),f=document.getElementById("header-inner");let v=!1,m=!1;function h(){if(v=!v,v){n.classList.remove("opacity-0","scale-95","pointer-events-none"),n.classList.add("opacity-100","scale-100"),n.setAttribute("aria-hidden","false"),n.removeAttribute("inert"),l.classList.remove("hidden"),i.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden";const e=i.querySelectorAll(".menu-line");e[0].classList.remove("-translate-y-2"),e[0].classList.add("rotate-45","translate-y-0"),e[1].classList.add("opacity-0"),e[2].classList.remove("translate-y-2"),e[2].classList.add("-rotate-45","translate-y-0")}else y()}function y(){if(v=!1,!n)return;n.classList.add("opacity-0","scale-95","pointer-events-none"),n.classList.remove("opacity-100","scale-100"),n.setAttribute("aria-hidden","true"),n.setAttribute("inert",""),l==null||l.classList.add("hidden"),i==null||i.setAttribute("aria-expanded","false"),document.body.style.overflow="";const e=i==null?void 0:i.querySelectorAll(".menu-line");e&&(e[0].classList.add("-translate-y-2"),e[0].classList.remove("rotate-45","translate-y-0"),e[1].classList.remove("opacity-0"),e[2].classList.add("translate-y-2"),e[2].classList.remove("-rotate-45","translate-y-0"))}function g(){if(m=!m,m){c.classList.remove("opacity-0","-translate-y-2","pointer-events-none"),c.classList.add("opacity-100","translate-y-0"),c.setAttribute("aria-hidden","false"),c.removeAttribute("inert"),a.setAttribute("aria-expanded","true");const e=c.querySelector('input[type="search"], input[type="text"]');e&&e.focus()}else L()}function L(){m=!1,c&&(c.classList.add("opacity-0","-translate-y-2","pointer-events-none"),c.classList.remove("opacity-100","translate-y-0"),c.setAttribute("aria-hidden","true"),c.setAttribute("inert",""),a==null||a.setAttribute("aria-expanded","false"))}function E(){if(!f)return;window.scrollY>20?(f.classList.remove("lg:py-6"),f.classList.add("lg:py-3")):(f.classList.remove("lg:py-3"),f.classList.add("lg:py-6"))}function r(){const e=document.querySelectorAll(".submenu-toggle"),o=document.querySelectorAll(".submenu-btn");e.forEach(s=>{s.addEventListener("click",u=>{const p=window.innerWidth<1024,b=s.closest(".has-submenu"),x=b==null?void 0:b.querySelector(".submenu");if(p&&x)u.preventDefault(),d(b,x);else{const w=s.dataset.href||s.href;w&&w!=="javascript:void(0)"&&(window.location.href=w)}})}),o.forEach(s=>{s.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation();const p=s.closest(".has-submenu"),b=p==null?void 0:p.querySelector(".submenu");b&&d(p,b)})}),document.addEventListener("click",s=>{s.target.closest(".has-submenu")||t()})}function d(e,o){const s=!o.classList.contains("hidden");if(t(),!s){o.classList.remove("hidden");const u=e.querySelector(".submenu-btn"),p=e.querySelector(".submenu-icon");u==null||u.setAttribute("aria-expanded","true"),p==null||p.classList.add("rotate-180")}}function t(){document.querySelectorAll(".submenu").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll(".submenu-btn").forEach(e=>{e.setAttribute("aria-expanded","false")}),document.querySelectorAll(".submenu-icon").forEach(e=>{e.classList.remove("rotate-180")})}i&&i.addEventListener("click",h),l&&l.addEventListener("click",y),a&&a.addEventListener("click",g),document.addEventListener("click",e=>{m&&c&&!c.contains(e.target)&&!a.contains(e.target)&&L()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(v&&y(),m&&L(),t())}),window.addEventListener("scroll",E,{passive:!0}),E(),r()}function q(){const i=document.getElementById("slider");if(!i)return;const n=i.querySelectorAll(".slide"),l=document.getElementById("slider-prev"),a=document.getElementById("slider-next"),c=parseInt(i.dataset.total,10);let f=0,v=null,m=!1;function h(d){n.forEach((t,e)=>{e===d?(t.classList.remove("opacity-0","translate-x-full","-translate-x-full","pointer-events-none"),t.classList.add("opacity-100","translate-x-0"),t.removeAttribute("aria-hidden")):e<d?(t.classList.remove("opacity-100","translate-x-0","translate-x-full"),t.classList.add("opacity-0","-translate-x-full","pointer-events-none"),t.setAttribute("aria-hidden","true")):(t.classList.remove("opacity-100","translate-x-0","-translate-x-full"),t.classList.add("opacity-0","translate-x-full","pointer-events-none"),t.setAttribute("aria-hidden","true"))})}function y(){f=(f+1)%c,h(f)}function g(){f=(f-1+c)%c,h(f)}function L(){m&&!v&&(v=setInterval(y,4e3))}function E(){v&&(clearInterval(v),v=null)}l&&l.addEventListener("click",g),a&&a.addEventListener("click",y),i.addEventListener("mouseenter",E),i.addEventListener("mouseleave",L),new IntersectionObserver(d=>{d.forEach(t=>{m=t.isIntersecting,m?L():E()})},{threshold:.2}).observe(i)}function I(){const i=document.querySelector(".content-full");if(!i)return;const n=document.createElement("div");n.id="reading-progress",n.className="fixed top-0 left-0 h-1.5 bg-rojo transform-gpu z-50",n.style.width="0%";let l=0,a=0,c=0;function f(){const h=i.getBoundingClientRect();l=h.top+window.pageYOffset,a=h.height,c=window.innerHeight}let v=!1;function m(){const h=window.pageYOffset;let y=0;if(h>l){const g=h-l,L=a-c;y=g/L*100,y=Math.min(Math.max(y,0),100)}n.style.width=`${y}%`}window.addEventListener("scroll",()=>{v||(requestAnimationFrame(()=>{m(),v=!1}),v=!0)},{passive:!0}),window.addEventListener("resize",()=>{f(),m()}),window.addEventListener("orientationchange",()=>{f(),m()}),requestAnimationFrame(()=>{document.body.prepend(n),f(),m()})}function T(){const i=document.querySelector(".content-full");if(!i)return;let n=null,l=null;function a(){return window.innerWidth<=1e3}function c(r){var t,e;const d=r.parentNode.cloneNode(!0);return(t=d.querySelector('a[id^="sdfootnote"], a[id^="_ftn"]'))==null||t.remove(),d.querySelectorAll('a[href^="#sdfootnote"], a[href^="#_ftnref"]').forEach(o=>o.remove()),(e=d.querySelector("sup"))==null||e.remove(),d.innerHTML.trim().replace(/^\s*\[\d+\]\s*/,"").replace(/^\s*\d+\s*/,"")}function f(){return n||(n=document.createElement("div"),n.id="footnote-tooltip",n.className="footnote-tooltip bg-white border border-gray-200 p-4 rounded-lg shadow-lg fixed text-lg leading-relaxed z-50 max-w-md opacity-0 transition-opacity duration-200 pointer-events-none",document.body.appendChild(n),n.addEventListener("mouseover",()=>clearTimeout(l)),n.addEventListener("mouseleave",()=>m()),n)}function v(r,d){clearTimeout(l);const t=f();t.innerHTML=d,t.style.left="-9999px",t.style.top="0px",t.classList.remove("opacity-0","pointer-events-none"),t.classList.add("opacity-100","pointer-events-auto");const e=r.getBoundingClientRect(),o=t.offsetWidth,s=t.offsetHeight,u=window.innerWidth,p=window.innerHeight;let b=Math.max(10,Math.min(e.left,u-o-20)),x=e.bottom+5;e.bottom+s>p&&e.top>s&&(x=e.top-s-5),t.style.left=`${b}px`,t.style.top=`${x}px`}function m(){l=setTimeout(()=>{n&&(n.classList.add("opacity-0","pointer-events-none"),n.classList.remove("opacity-100","pointer-events-auto"))},200)}function h(r,d,t){const e=document.getElementById(`expanded-footnote-${t}`);if(document.querySelectorAll(".expanded-footnote").forEach(s=>{s.id!==`expanded-footnote-${t}`&&(s.classList.add("removing"),s.classList.remove("entering"),setTimeout(()=>s.remove(),200))}),e){e.classList.add("removing"),e.classList.remove("entering"),setTimeout(()=>e.remove(),200);return}const o=document.createElement("div");o.id=`expanded-footnote-${t}`,o.className="expanded-footnote",o.innerHTML=d,y(r,o),requestAnimationFrame(()=>{o.classList.add("entering"),o.style.maxHeight=o.scrollHeight+"px"}),o.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),o.classList.add("removing"),o.classList.remove("entering"),setTimeout(()=>o.remove(),200)})}function y(r,d){const t=r.closest("sup")||r.querySelector("sup"),e=(t||r).nextSibling;if((e==null?void 0:e.nodeType)===Node.TEXT_NODE&&(e.textContent.startsWith(".")||e.textContent.startsWith(",")||e.textContent.startsWith(" "))){const[o,...s]=e.textContent,u=document.createTextNode(o),p=document.createTextNode(s.join(""));e.parentNode.replaceChild(u,e),u.parentNode.insertBefore(d,u.nextSibling),d.parentNode.insertBefore(p,d.nextSibling)}else(t||r).insertAdjacentElement("afterend",d)}const g=i.querySelector(".wp-block-separator"),L=r=>(g==null?void 0:g.compareDocumentPosition(r))&Node.DOCUMENT_POSITION_FOLLOWING;i.querySelectorAll('a[href*="_ftn"], a[href*="sdfootnote"]').forEach((r,d)=>{const t=r.getAttribute("href"),e=t.substring(1).replace(/^sdfootnoteanc/,"sdfootnotesym"),o=document.getElementById(e);if(!o)return;if(L(r)){r.addEventListener("click",u=>{u.preventDefault();const p=document.getElementById(t.replace("_ftn","_ftnref").substring(1));p==null||p.scrollIntoView({behavior:"smooth"})});return}const s=c(o);a()?r.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),h(r,s,d)}):(r.addEventListener("mouseover",()=>v(r,s)),r.addEventListener("mouseout",()=>m()),r.addEventListener("click",u=>{u.preventDefault(),o.scrollIntoView({behavior:"smooth"})}))})}function S(){A(),q(),I(),T(),B()}function B(){document.querySelectorAll(".share-container").forEach(n=>{const l=n.querySelector(".share-toggle"),a=n.querySelector(".share-menu");!l||!a||(l.addEventListener("click",()=>{!a.classList.contains("opacity-0")?(a.classList.add("opacity-0","pointer-events-none"),a.classList.remove("opacity-100","pointer-events-auto"),l.setAttribute("aria-expanded","false")):(a.classList.remove("opacity-0","pointer-events-none"),a.classList.add("opacity-100","pointer-events-auto"),l.setAttribute("aria-expanded","true"))}),document.addEventListener("click",c=>{n.contains(c.target)||(a.classList.add("opacity-0","pointer-events-none"),a.classList.remove("opacity-100","pointer-events-auto"),l.setAttribute("aria-expanded","false"))}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S):S();
